import{r as e,a as E,j as a}from"./index-Dh4BDzNg.js";function S(){const[n,o]=e.useState(""),[m,l]=e.useState(""),[r,c]=e.useState(""),[d,i]=e.useState(!1),{classId:f}=E(),g=e.useCallback(()=>{i(!1),setTimeout(()=>{o(""),l(""),c("")},300)},[]);return e.useEffect(()=>{const s=new WebSocket(`ws://${window.location.host}`);return s.onmessage=u=>{const t=JSON.parse(u.data);t.type==="SEND_LONG_MESSAGE"?(o(t.payload.messageText),l(t.payload.sender||""),c(t.payload.classId||""),i(!0)):t.type==="CLEAR_LONG_MESSAGE"&&(i(!1),setTimeout(()=>{o(""),l(""),c("")},300))},()=>s.close()},[]),e.useEffect(()=>{const s=u=>{u.key==="Escape"&&d&&g()};return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[d,g]),n&&r&&r!=="ALL"&&r!==f||!n?null:a.jsx("div",{className:`long-message-overlay${d?"":" hidden"}`,children:a.jsxs("div",{className:"long-message-container",children:[m&&a.jsxs("div",{className:"long-message-sender",children:[m," 선생님"]}),a.jsx("div",{className:"long-message-content",children:n})]})})}export{S as default};
